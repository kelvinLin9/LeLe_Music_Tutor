import{d as k,m as f,a as S,b as P,_ as N,o as n,c as h,l as B,e as a,q as D,h as c,t as r,n as b,k as d,g as _,F as v,p as M,j as $}from"./index-55fe501c.js";import{c as w,g as x}from"./goStore-5df3f18b.js";import{d as g}from"./dataStore-2bd6bb52.js";const A=k("paginationStore",{state:()=>({eachPage:[],pageSize:12,page:{totalPage:0,currentPage:1,pageNumBox:[],hasPrevPage:!1,hasNextPage:!1}}),actions:{pagination(e){this.page.totalPage=Math.ceil(e.length/this.pageSize),this.eachPage=[],this.page.currentPage<1&&(this.page.currentPage=1),this.page.currentPage>this.page.totalPage&&(this.page.currentPage=this.page.totalPage),this.page.hasPrevPage=this.page.currentPage>1,this.page.hasNextPage=this.page.currentPage<this.page.totalPage;const s=this.page.currentPage*this.pageSize-this.pageSize+1,o=this.page.currentPage*this.pageSize;e.forEach((l,m)=>{const C=m+1;C>=s&&C<=o&&this.eachPage.push(l)}),this.showPageBox()},showPageBox(){let s=this.page.currentPage-Math.floor(2.5),o=this.page.currentPage+Math.floor(5/2);s<1&&(s=1,o=5),o>this.page.totalPage&&(o=this.page.totalPage,s=this.page.totalPage-(5-1)),this.page.totalPage<5&&(s=1,o=this.page.totalPage),this.page.pageNumBox=[];for(let l=s;l<=o;l++)this.page.pageNumBox.push(l);console.log(this.page.pageNumBox)}}}),u=g(),y=A(),z=k("filterStore",{state:()=>({selectCityName:"",selectCourseCategory:"",selectCourseName:"",courseMethod:["在學生家","在老師家","線上"],selectCourseMethod:"",sortMethod:["依新舊","依人氣","依金額"],selectSortMethod:""}),actions:{selectCityNameCancel(){this.selectCourseMethod===""&&(this.selectCityName="")},courseSort(){console.log(this.selectSortMethod),this.selectSortMethod==="依金額"?u.AllCoursesFirebaseData.sort((e,s)=>s.data.price-e.data.price):this.selectSortMethod==="依新舊"?u.AllCoursesFirebaseData.sort((e,s)=>s.createdTime-e.createdTime):this.selectSortMethod==="依人氣"&&u.AllCoursesFirebaseData.sort((e,s)=>s.data.whoBuy.length-e.data.whoBuy.length)}},getters:{filterData(){return console.log("filter"),this.selectCourseMethod===""?u.AllCoursesFirebaseData.filter(e=>e.data.cityName.match(this.selectCityName)&&e.data.courseCategory.match(this.selectCourseCategory)&&e.data.courseName.match(this.selectCourseName)):u.AllCoursesFirebaseData.filter(e=>e.data.cityName.match(this.selectCityName)&&e.data.courseCategory.match(this.selectCourseCategory)&&e.data.courseName.match(this.selectCourseName)&&e.data.courseMethod.includes(this.selectCourseMethod))},currentPageCoursesData(){return y.pagination(this.filterData),y.eachPage}}});const F={watch:{currentPageCoursesData(){this.$router.currentRoute.value.fullPath==="/AllCourses"&&(this.courseCardData=this.currentPageCoursesData)},userBookmarkCourses(){this.$router.currentRoute.value.fullPath==="/MyCourses"&&this.myCoursesState==="bookmark"&&(this.courseCardData=this.userBookmarkCourses)}},computed:{...f(g,["bookmarkState","userTeacherCourses","userStudentCourses","userBookmarkCourses"]),...S(g,["myCoursesState","classScheduleData"]),...S(w,["courseCardData"]),...f(z,["currentPageCoursesData"])},methods:{...P(g,["SetUpTeacherClassSchedule","lookStudentClassSchedule","toggleBookmark"]),...P(x,["goCoursePage"])},created(){this.$router.currentRoute.value.fullPath==="/AllCourses"?this.courseCardData=this.currentPageCoursesData:this.$router.currentRoute.value.fullPath==="/MyCourses"&&(this.courseCardData=this.userStudentCourses)}},p=e=>(M("data-v-25828fb5"),e=e(),$(),e),T=["onClick"],I={class:"details d-flex flex-column"},R={class:"fs-6"},L=p(()=>a("i",{class:"bi bi-tags me-6"},null,-1)),U={class:"mt-auto fs-5"},V=["onClick"],j=["onClick"],E={class:"fs-5 fw-bold d-flex"},q=["onClick"],W={class:"fs-6"},G={class:"d-flex align-items-center"},H=p(()=>a("span",{class:"material-symbols-outlined fs-6 me-4"},"timer",-1)),J=p(()=>a("span",{class:"material-symbols-outlined fs-6 ms-8 me-4"},"map",-1)),K=p(()=>a("span",{class:"material-symbols-outlined fs-6 ms-8 me-4"},"group",-1)),O={class:"d-flex justify-content-between align-items-center"},Q={class:"fs-5 fw-bold"},X=["onClick"],Y=["onClick"];function Z(e,s,o,l,m,C){return n(!0),h(v,null,B(e.courseCardData,t=>(n(),h("div",{class:"blog-card",key:t.id},[a("div",{class:"meta cursor-pointer",onClick:i=>e.goCoursePage(t.id)},[a("div",{class:"photo",style:D({backgroundImage:`url(${t.data.courseImg})`})},null,4),a("ul",I,[a("li",R,[L,c(" "+r(t.data.courseCategory),1)]),a("li",U,[a("i",{class:b(["",e.bookmarkState(t.id)]),onClick:d(i=>e.toggleBookmark(t.id),["stop"]),"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"加入 / 移除收藏"},null,10,V)])])],8,T),a("div",{class:"description cursor-pointer",onClick:i=>e.goCoursePage(t.id)},[a("h2",E,[c(r(t.data.courseName)+" ",1),a("i",{class:b(["ms-auto d-sm-none",e.bookmarkState(t.id)]),onClick:d(i=>e.toggleBookmark(t.id),["stop"]),"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"加入 / 移除收藏"},null,10,q)]),a("h3",W,"by "+r(t.data.displayName),1),a("p",G,[H,c(" "+r(t.data.time)+" ",1),J,c(" "+r(t.data.cityName||"線上")+" ",1),K,c(" "+r(t.data.whoBuy.length),1)]),a("p",O,[a("span",Q,"NT$ "+r(e.$filters.currency(t.data.price)),1),e.myCoursesState==="teacher"?(n(),h("button",{key:0,type:"button",class:"btn btn-outline-primary border-0 fw-bold","data-bs-toggle":"modal","data-bs-target":"#SetUpClassSchedule",onClick:d(i=>e.SetUpTeacherClassSchedule(t),["stop"])}," 設定上課時間 ",8,X)):_("",!0),e.myCoursesState==="student"?(n(),h("button",{key:1,type:"button",class:"btn btn-outline-primary border-0 fw-bold","data-bs-toggle":"modal","data-bs-target":"#ClassSchedule",onClick:d(i=>e.lookStudentClassSchedule(t),["stop"])}," 查看上課時間 ",8,Y)):_("",!0)])],8,j)]))),128)}const se=N(F,[["render",Z],["__scopeId","data-v-25828fb5"]]);export{se as C,z as f,A as p};
